---
id: response
title: Response Node
sidebar_label: Response Node
---

import useBaseUrl from '@docusaurus/useBaseUrl';

## Usage

Response node is used to send a response to the user. We can send 2 types of responses:

### Text Response

To send a text response, you can simply write it in text form

```go
This is a response.
```
<img alt="Input Node explained" src={useBaseUrl('img/nodes/stock/response/1.png')} />

To extract variable data in the message script, you can use d, s, u, m or var depending on if the variable is saved in the execution, session, user data, module or environment variable respectively. For example,

```go
This is a {{ d "firstName" }}
This is a {{ u "firstName" }}
This is a {{ s "firstName" }}
This is a {{ m "inputString" }}
This is a {{ var "FACEBOOK_ACCESS_TOKEN" }}
```
<img alt="Input Node explained" src={useBaseUrl('img/nodes/stock/response/2.png')} />

You can also add conditions based responses to the chatbot more. Refer to the [Go template documentation](https://golang.org/pkg/text/template/) for further tips and tricks

```go
{{ if u "firstName" }}
Hi {{ u "firstName" }}. How are you doing?
{{ else }}
Hi. How are you doing?
{{ end }}
```
<img alt="Input Node explained" src={useBaseUrl('img/nodes/stock/response/3.png')} />

To customize the response for a different channel, switch to the channel and add the response. If the channel response is not provided, the basic response will be sent on all the channels.
<img alt="Input Node explained" src={useBaseUrl('img/nodes/stock/response/4.png')} />

### Text Message with Quick Replies (QR)

To send a message with quick replies, just add `{{ qr “qr name” “qr value” }}`. Each QR has a name and value. Name is the text shown to the user but value is the text received back by the bot. If the value is not mentioned, the QR name is considered as the value by default. Examples, `{{ qr “One” }}` or `{{ qr “One” “1” }}`. Choose the format that works best for your case.

```go
Hi. How are you doing today?
{{ qr "Doing Great!!" "WELCOME_GOOD"}} {{ qr "Not a great start :(" "WELCOME_BAD"}}
```
<img alt="Input Node explained" src={useBaseUrl('img/nodes/stock/response/5.png')} />



## Tags Reference

#### 1. Response ```<response>```
The response tag is the highest level of tag used to draft the response. All the further tags have to be in the ```<response> </response>``` tag otherwise they will not be parsed.

##### Example 
```xml
<response>
	<message>
		<text>Hi I am from Convai.</text>
	</message>
	<message>
	    <text>Made with ❤️ on Convai.</text>
	</message>
</response>
```
<img alt="Response tag" src={useBaseUrl('img/nodes/stock/response/7.png')} />

##### 

##### Reference
| Name | Type | Required | Description |
| --- | --- | --- | --- |
| Messages | Array | Required | Array of ```<message>``` |

#### 2. Message ```<message>```
The message tag is used to compose a single message. You can add an optional typing attribute in the message tag to indicate the amount of time (in seconds) to show typing before sending the message to the user. By default, the typing is set to 1 (second). For example, a typing of 4 seconds will be coded as ```<message typing='4'>```

##### Example 
```xml
<response>
	<message>
		<text>Hi I am from Convai.</text>
	</message>
	<message>
	    <text>Made with ❤️ on Convai.</text>
	</message>
</response>
```
<img alt="Response tag" src={useBaseUrl('img/nodes/stock/response/7.png')} />

##### 

##### Reference
| Name | Type | Required | Description |
| --- | --- | --- | --- |
| Messages | Array | Required | Array of ```<message>``` |

#### 2. Message ```<message>```
- The message tag is used to compose a single message
- 
- A message can accept different type of tags - ```<text>```, ```<sender>```, array of ```<qr>```, ```<cards>```, ```<image>``` 


## Configuration

The configuration of the node is as defined below:

| Name                    | Required |                      Description                                     |
| ----------------------- | -------- | -------------------------------------------------------------------- |
| Title | Required | The title of the node |
| Send Now (Do not batch) | | Normally when a Convai request happens, all responses are collected and sent out at the end. When Send Now is enabled, the response will not wait until the request is finished. It will be sent immediately. Responses marked with Send Now will not be included when other batched messages are sent out at the end of a request. |
| Channel | Required | Responses can be configured differently for different channels |
| Message | Required | Message is a collection of messages. A single response can have more than 1 message. Click on <img alt="Input Node explained" src={useBaseUrl('img/nodes/stock/response/6.png')} /> to add more messages |
| Message Editor | Required | The message editor is a [templating](https://golang.org/pkg/text/template/) enabled field where you can compose your response |
| Typing Time | Required | Typing time defines the time to wait before sending the message to the user. During this time, the bot will show the typing indicator. |
