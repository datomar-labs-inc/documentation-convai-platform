(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{150:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return u}));var a=n(1),o=n(9),i=(n(0),n(236)),r=n(238),s={id:"adding-fallback",title:"Adding Fallback - Enhancing User Experience",sidebar_label:"3. Adding Fallback",description:"Step by step guide to make your first simple bot on Convai Studio"},l={id:"convai-studio/simple-bot/adding-fallback",title:"Adding Fallback - Enhancing User Experience",description:"Step by step guide to make your first simple bot on Convai Studio",source:"@site/docs/convai-studio/simple-bot/adding-fallback.mdx",permalink:"/convai-studio/simple-bot/adding-fallback",sidebar_label:"3. Adding Fallback",sidebar:"someSidebar",previous:{title:"Building a bot with Convai",permalink:"/convai-studio/simple-bot/building-a-bot"},next:{title:"Adding Channels - Facebook and Twilio",permalink:"/convai-studio/simple-bot/adding-channels"}},c=[],b={rightToc:c};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Let\u2019s take a tour back to the execution of the bot we built. You may already find out that it is ambiguous for new users of this bot. In this section, we will optimize the bot\u2019s response and add some Fallbacks to unknown User Inputs. By the way, you don\u2019t need to do any other work for Facebook Channel as Convai does it for you, it just works!"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Go to the Main Graph of the bot"),Object(i.b)("p",{parentName:"li"},"Observe the graph, you can find that there\u2019s a situation we did not handle. When the user input is not one of the intents in the graph, the bot will not respond."),Object(i.b)("img",{alt:"enhanced bot graph",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image83.png")}),Object(i.b)("p",{parentName:"li"},"In Dev Console, we are able to see this No responses received message, but not in other Channels like Facebook. We need to handle this by using Fallback."),Object(i.b)("img",{alt:"no response",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image79.png")})),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Create a new Module named \u201cFallback\u201d. Connect it to the Any Time System Node with a basic link - user input is anything other than the intents we have on other modules and nodes. "),Object(i.b)("img",{alt:"add fallback module",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image85.png")}),Object(i.b)("p",{parentName:"li"},"Edit the graph of the Fallback Module:"),Object(i.b)("img",{alt:"fallback module graph",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image106.png")}),Object(i.b)("p",{parentName:"li"},"Edit the General Fallback Response Node:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml"}),'<response>\n    <message>\n        <text>Sorry, I don\'t understand.</text>\n        <qr value="ask a question">A single Quiz</qr>\n        <qr value="challenge me">Challenge 10 Quizzes</qr>\n        <qr value="what is my point">Check your score</qr>\n    </message>\n</response>\n')),Object(i.b)("p",{parentName:"li"},"The Preview of this Response looks like this:"),Object(i.b)("img",{alt:"fallback response preview",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image26.png")}),Object(i.b)("p",{parentName:"li"},"This response uses Quick Reply. Quick Replies gives the user a convenient way to send predefined messages to the bot by clicking on them. Use this wisely as the user may rely solely on quick reply, in our case, the \u201cAsk a question\u201d quick reply asks a question of random category for a user to answer. The bot is capable of user inputs like \u201cAsk sports questions\u201d, this is more about the prompt for user input, we will discuss it later.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"By its nature, Fallback should always be considered after a User Input Node (as well as Any Time System Node which we have covered). But sometimes it is not necessary. For example in Ask Question Module, we validate user input which gives only two results - correct or incorrect answer in the Validate Answer Script Node. The execution flow is closed, unlike the flow in the Main graph before we added the Fallback Module."),Object(i.b)("img",{alt:"ask question module no fallback",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image96.png")})),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"We can find the execution flow through the User Input Node in the Challenge Module is not closed. Users could input anything that does not match the AskQuestion Intent. We can use Quick Replies in Challenge Starts Response Node, but this makes the AskQuestion Intent meaningless and there are too many categories of questions, we might need to add a bunch of redundant Quick Replies. So we need a Fallback to handle this. "),Object(i.b)("p",{parentName:"li"},"Connect the Fallback Module to the User Input Node."),Object(i.b)("img",{alt:"connect to user input",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image10.png")}),Object(i.b)("p",{parentName:"li"},"But the General Fallback Response does not fit in this situation. Because all we want is to prompt the user input to match AskQuestion intent."),Object(i.b)("img",{alt:"general fallback no good",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image28.png")}),Object(i.b)("p",{parentName:"li"},"We need another Fallback Response for this situation. Add a Module Variable in Fallback Module. This makes sure the bot knows which Fallback Response it should go to."),Object(i.b)("img",{alt:"add mod var",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image108.png")}),Object(i.b)("p",{parentName:"li"},"Edit Fallback Module in Challenge Module"),Object(i.b)("img",{alt:"edit mod var",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image111.png")}),Object(i.b)("p",{parentName:"li"},"Edit Fallback Module. If m.comingModule = general, Fallback responds with the General Fallback Message. If m.comingModule = challenge, Fallback responds with Challenge Fallback Message."),Object(i.b)("img",{alt:"edit fallback module",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image109.png")}),Object(i.b)("img",{alt:"edit fallback module",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image110.png")}),Object(i.b)("p",{parentName:"li"},"Edit Challenge Fallback Response Node"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml"}),'<response>\n    <message>\n        <text>Sorry, I don\'t understand.\n        \nType "ask [category] questions" to start challenge\n\n[category] can be any category of questions you\'d like to challenge, or you can just type "ask questions" to challenge questions from random categories.\n</text>\n    </message>\n</response>\n'))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Using Fallback optimizes User Experience when the user input something wrong. And it is the bot developer\u2019s responsibility to let users know how to do things right. That means we need to tell the user how to do things correctly in ANY Response Node that prompts a user input."),Object(i.b)("p",{parentName:"li"},"Go to Main Graph, edit the Welcome Response Node"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml"}),'<response>\n    <message>\n        <text>Hi, I am the trivia bot.\n        \nYou can do a quiz question by type "ask a [category name or nothing] question". \n        \nAnd I can make you a challenge of 10 questions, type "challenge me".\n\nIf you want to know your point, type "what is my point"\n</text>\n    </message>\n</response>\n')),Object(i.b)("p",{parentName:"li"},"Go to Challenge Module, edit the Challenge Starts Response Node"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml"}),'<response>\n    <message>\n        <text>Preparing challenge...\n\nType "ask [category or nothing] questions" to start the challenge       \n</text>\n    </message>\n</response>\n'))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"The overall execution of the User Experience Optimized bot"),Object(i.b)("img",{alt:"user exp execution",src:Object(r.a)("img/convai-studio/simple-bot/building-bot/image112.gif")}))),Object(i.b)("p",null,"Congratulations, you have learned all of the basics you need to develop a chatbot in Convai. Let's add some channels."))}u.isMDXComponent=!0},236:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),b=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},u=function(e){var t=b(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=b(n),d=a,m=u["".concat(r,".").concat(d)]||u[d]||p[d]||i;return n?o.a.createElement(m,s({ref:t},c,{components:n})):o.a.createElement(m,s({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},237:function(e,t,n){"use strict";var a=n(0),o=n(49);t.a=function(){return Object(a.useContext)(o.a)}},238:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(239);var a=n(237);function o(e){var t=(Object(a.a)().siteConfig||{}).baseUrl,n=void 0===t?"/":t;if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?n+e.slice(1):n+e}},239:function(e,t,n){"use strict";var a=n(12),o=n(24),i=n(240),r="".startsWith;a(a.P+a.F*n(241)("startsWith"),"String",{startsWith:function(e){var t=i(this,e,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return r?r.call(t,a,n):t.slice(n,n+a.length)===a}})},240:function(e,t,n){var a=n(73),o=n(25);e.exports=function(e,t,n){if(a(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},241:function(e,t,n){var a=n(2)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,!"/./"[e](t)}catch(o){}}return!0}}}]);