(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{162:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return b})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var i=n(1),o=n(9),a=(n(0),n(225)),c=n(227),r={id:"facebook",title:"Facebook Integration",sidebar_label:"Facebook",description:"How to connect Facebook Messenger with Convai Studio"},b={id:"convai-studio/integrations/channels/facebook",title:"Facebook Integration",description:"How to connect Facebook Messenger with Convai Studio",source:"@site/docs/convai-studio/integrations/channels/facebook.mdx",permalink:"/convai-studio/integrations/channels/facebook",sidebar_label:"Facebook",sidebar:"someSidebar",previous:{title:"Dashbot Integration",permalink:"/convai-studio/integrations/analytics/dashbot"},next:{title:"Slack Integration",permalink:"/convai-studio/integrations/channels/slack"}},s=[],l={rightToc:s};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"This document outlines the process to integrate Facebook Messenger with Convai Studio."),Object(a.b)("div",{className:"admonition admonition-tip"},Object(a.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("div",Object(i.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(i.a)({parentName:"div"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(a.b)("path",Object(i.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"Note")),Object(a.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},Object(a.b)("em",{parentName:"p"},Object(a.b)("strong",{parentName:"em"},"NOTE: If you are doing a new integration, add it into the Development environment before any other environments."))))),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"In Convai, go to Settings via Side Nav. Add Facebook integration, leave the configurations blank and save it."),Object(a.b)("img",{alt:"add facebook integration",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image98.png")})),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Login to ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"https://developers.facebook.com/"}),"Facebook for Developer"),". Click on My Apps"),Object(a.b)("img",{alt:"facebook my apps",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image67.png")}),Object(a.b)("p",{parentName:"li"},"Click on Add a New App, choose Manage Business Integrations"),Object(a.b)("img",{alt:"add new app",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image86.png")}),Object(a.b)("img",{alt:"choose business integration",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image48.png")}),Object(a.b)("p",{parentName:"li"},"Enter the App Display Name and choose Just me to use the app for demonstration. Click Create App ID and confirm the security check."),Object(a.b)("img",{alt:"configure app",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image77.png")})),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"On the left side panel, click on the + button on the right of PRODUCTS."),Object(a.b)("img",{alt:"add products",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image93.png")}),Object(a.b)("p",{parentName:"li"},"Find Messenger and click Set Up."),Object(a.b)("img",{alt:"set up messenger",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image64.png")})),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Go to Settings -> Basic, copy the App Secret into Convai Facebook Integration Configuration"),Object(a.b)("img",{alt:"copy app secret",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image70.png")}),Object(a.b)("img",{alt:"paste app secret into convai",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image68.png")})),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"On Facebook for Developer, go back to Messenger Settings"),Object(a.b)("img",{alt:"messenger settings",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image52.png")}),Object(a.b)("p",{parentName:"li"},"Scroll down a little bit to find the Access Tokens section, click on Add or Remove Pages"),Object(a.b)("img",{alt:"add page",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image22.png")}),Object(a.b)("p",{parentName:"li"},"A new window will pop up, click Continue."),Object(a.b)("img",{alt:"continue pop up",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image94.png")}),Object(a.b)("p",{parentName:"li"},"Select Convai Tutorial Bot, click Next."),Object(a.b)("img",{alt:"select tutorial bot",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image5.png")}),Object(a.b)("p",{parentName:"li"},"Click Done"),Object(a.b)("img",{alt:"done",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image41.png")}),Object(a.b)("p",{parentName:"li"},"Click OK"),Object(a.b)("img",{alt:"ok",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image51.png")}),Object(a.b)("p",{parentName:"li"},"You are brought back to the Messenger Settings. In the Access Tokens section, you can find the created Page, click on Generate Token."),Object(a.b)("img",{alt:"generate token",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image6.png")}),Object(a.b)("p",{parentName:"li"},"Check I Understand and copy the generated Page Token in Convai Facebook Configuration."),Object(a.b)("img",{alt:"token generated",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image21.png")}),Object(a.b)("p",{parentName:"li"},"Save the Facebook Integration Configuration in Convai, click the < button, copy the Facebook webhook URL."),Object(a.b)("img",{alt:"save facebook integration",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image18.png")}),Object(a.b)("img",{alt:"copy facebook webhook",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image73.png")}),Object(a.b)("p",{parentName:"li"},"Back in Facebook Messenger Settings, Click Done on the Generate Token page. Scroll down to find the Webhooks Section, click on Add Callback URL."),Object(a.b)("img",{alt:"add callback url",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image101.png")}),Object(a.b)("p",{parentName:"li"},"Fill the Callback URL with the Facebook webhook URL copied in Convai"),Object(a.b)("img",{alt:"fill url",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image90.png")}),Object(a.b)("p",{parentName:"li"},"Next, go back to Convai, open the Facebook Integration Configuration, enter any password you like in the Verification Token field and Save it. Here we use \u201cconvai\u201d as the Verification Token for demonstration, you can use anything more secure you like. "),Object(a.b)("img",{alt:"convai verify token",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image53.png")}),Object(a.b)("p",{parentName:"li"},"In Facebook for Developers, enter the Verification Token you entered and saved in Convai. Click Verify and Save."),Object(a.b)("img",{alt:"facebook verify token",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image54.png")})),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Next you need to Add Subscription for the webhook we added in the previous step."),Object(a.b)("p",{parentName:"li"},"In the Webhook Section at Convai Tutorial Bot Page, click Add Subscription. Check messages, messaging_postbacks, message_deliveries, message_reads and Save."),Object(a.b)("img",{alt:"facebook webhook subs",src:Object(c.a)("img/convai-studio/simple-bot/building-bot/image71.png")}),Object(a.b)("p",{parentName:"li"},"For your own developed bot, you might want to read Facebook Messenger\u2019s Documentation about the ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"https://developers.facebook.com/docs/messenger-platform/webhook"}),"Facebook Messenger Webhook Subscription"),".")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Now the bot is integrated in Facebook Channel, you don\u2019t need to do anything else, it just works."))))}p.isMDXComponent=!0},225:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u}));var i=n(0),o=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),l=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r({},t,{},e)),n},p=function(e){var t=l(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=Object(i.forwardRef)((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,c=e.parentName,s=b(e,["components","mdxType","originalType","parentName"]),p=l(n),m=i,u=p["".concat(c,".").concat(m)]||p[m]||g[m]||a;return n?o.a.createElement(u,r({ref:t},s,{components:n})):o.a.createElement(u,r({ref:t},s))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,c=new Array(a);c[0]=m;var r={};for(var b in t)hasOwnProperty.call(t,b)&&(r[b]=t[b]);r.originalType=e,r.mdxType="string"==typeof e?e:i,c[1]=r;for(var s=2;s<a;s++)c[s]=n[s];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},226:function(e,t,n){"use strict";var i=n(0),o=n(49);t.a=function(){return Object(i.useContext)(o.a)}},227:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(228);var i=n(226);function o(e){var t=(Object(i.a)().siteConfig||{}).baseUrl,n=void 0===t?"/":t;if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?n+e.slice(1):n+e}},228:function(e,t,n){"use strict";var i=n(12),o=n(24),a=n(229),c="".startsWith;i(i.P+i.F*n(230)("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return c?c.call(t,i,n):t.slice(n,n+i.length)===i}})},229:function(e,t,n){var i=n(73),o=n(25);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},230:function(e,t,n){var i=n(2)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(o){}}return!0}}}]);