(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{148:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return p}));var a=n(1),r=n(9),s=(n(0),n(203)),i=n(205),o={id:"response",title:"Response Node",sidebar_label:"Response Node"},c={id:"nodes/stock/response",title:"Response Node",description:"import useBaseUrl from '@docusaurus/useBaseUrl';",source:"@site/docs/nodes/stock/response.mdx",permalink:"/docs/nodes/stock/response",editUrl:"https://github.com/datomar-labs-inc/documentation-convai-platform/docs/nodes/stock/response.mdx",sidebar_label:"Response Node",sidebar:"someSidebar",previous:{title:"One Time Broadcast Node",permalink:"/docs/nodes/stock/one-time-broadcast"},next:{title:"Script Node",permalink:"/docs/nodes/stock/script"}},b=[{value:"Usage",id:"usage",children:[{value:"Text Response",id:"text-response",children:[]},{value:"Text Message with Quick Replies (QR)",id:"text-message-with-quick-replies-qr",children:[]}]},{value:"Tags Reference",id:"tags-reference",children:[]},{value:"Configuration",id:"configuration",children:[]}],l={rightToc:b};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(s.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h2",{id:"usage"},"Usage"),Object(s.b)("p",null,"Response node is used to send a response to the user. We can send 2 types of responses:"),Object(s.b)("h3",{id:"text-response"},"Text Response"),Object(s.b)("p",null,"To send a text response, you can simply write it in text form"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-go"}),"This is a response.\n")),Object(s.b)("img",{alt:"Input Node explained",src:Object(i.a)("img/nodes/stock/response/1.png")}),Object(s.b)("p",null,"To extract variable data in the message script, you can use d, s, u, m or var depending on if the variable is saved in the execution, session, user data, module or environment variable respectively. For example,"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-go"}),'This is a {{ d "firstName" }}\nThis is a {{ u "firstName" }}\nThis is a {{ s "firstName" }}\nThis is a {{ m "inputString" }}\nThis is a {{ var "FACEBOOK_ACCESS_TOKEN" }}\n')),Object(s.b)("img",{alt:"Input Node explained",src:Object(i.a)("img/nodes/stock/response/2.png")}),Object(s.b)("p",null,"You can also add conditions based responses to the chatbot more. Refer to the ",Object(s.b)("a",Object(a.a)({parentName:"p"},{href:"https://golang.org/pkg/text/template/"}),"Go template documentation")," for further tips and tricks"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-go"}),'{{ if u "firstName" }}\nHi {{ u "firstName" }}. How are you doing?\n{{ else }}\nHi. How are you doing?\n{{ end }}\n')),Object(s.b)("img",{alt:"Input Node explained",src:Object(i.a)("img/nodes/stock/response/3.png")}),Object(s.b)("p",null,"To customize the response for a different channel, switch to the channel and add the response. If the channel response is not provided, the basic response will be sent on all the channels."),Object(s.b)("img",{alt:"Input Node explained",src:Object(i.a)("img/nodes/stock/response/4.png")}),Object(s.b)("h3",{id:"text-message-with-quick-replies-qr"},"Text Message with Quick Replies (QR)"),Object(s.b)("p",null,"To send a message with quick replies, just add ",Object(s.b)("inlineCode",{parentName:"p"},"{{ qr \u201cqr name\u201d \u201cqr value\u201d }}"),". Each QR has a name and value. Name is the text shown to the user but value is the text received back by the bot. If the value is not mentioned, the QR name is considered as the value by default. Examples, ",Object(s.b)("inlineCode",{parentName:"p"},"{{ qr \u201cOne\u201d }}")," or ",Object(s.b)("inlineCode",{parentName:"p"},"{{ qr \u201cOne\u201d \u201c1\u201d }}"),". Choose the format that works best for your case."),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-go"}),'Hi. How are you doing today?\n{{ qr "Doing Great!!" "WELCOME_GOOD"}} {{ qr "Not a great start :(" "WELCOME_BAD"}}\n')),Object(s.b)("img",{alt:"Input Node explained",src:Object(i.a)("img/nodes/stock/response/5.png")}),Object(s.b)("h2",{id:"tags-reference"},"Tags Reference"),Object(s.b)("h4",{id:"1-response-response"},"1. Response ",Object(s.b)("inlineCode",{parentName:"h4"},"<response>")),Object(s.b)("p",null,"The response tag is the highest level of tag used to draft the response. All the further tags have to be in the ",Object(s.b)("inlineCode",{parentName:"p"},"<response> </response>")," tag otherwise they will not be parsed."),Object(s.b)("h5",{id:"example"},"Example"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml"}),"<response>\n    <message>\n        <text>Hi I am from Convai.</text>\n    </message>\n    <message>\n        <text>Made with \u2764\ufe0f on Convai.</text>\n    </message>\n</response>\n")),Object(s.b)("img",{alt:"Response tag",src:Object(i.a)("img/nodes/stock/response/7.png")}),Object(s.b)("h5",{id:""}),Object(s.b)("h5",{id:"reference"},"Reference"),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Name"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Type"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Messages"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Array"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Array of ",Object(s.b)("inlineCode",{parentName:"td"},"<message>"))))),Object(s.b)("h4",{id:"2-message-message"},"2. Message ",Object(s.b)("inlineCode",{parentName:"h4"},"<message>")),Object(s.b)("p",null,"The message tag is used to compose a single message. You can add an optional typing attribute in the message tag to indicate the amount of time (in seconds) to show typing before sending the message to the user. By default, the typing is set to 1 (second). For example, a typing of 4 seconds will be coded as ",Object(s.b)("inlineCode",{parentName:"p"},"<message typing='4'>")),Object(s.b)("h5",{id:"example-1"},"Example"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml"}),"<response>\n    <message>\n        <text>Hi I am from Convai.</text>\n    </message>\n    <message>\n        <text>Made with \u2764\ufe0f on Convai.</text>\n    </message>\n</response>\n")),Object(s.b)("img",{alt:"Response tag",src:Object(i.a)("img/nodes/stock/response/7.png")}),Object(s.b)("h5",{id:"-1"}),Object(s.b)("h5",{id:"reference-1"},"Reference"),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Name"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Type"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Messages"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Array"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Array of ",Object(s.b)("inlineCode",{parentName:"td"},"<message>"))))),Object(s.b)("h4",{id:"2-message-message-1"},"2. Message ",Object(s.b)("inlineCode",{parentName:"h4"},"<message>")),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"The message tag is used to compose a single message"),Object(s.b)("li",{parentName:"ul"}),Object(s.b)("li",{parentName:"ul"},"A message can accept different type of tags - ",Object(s.b)("inlineCode",{parentName:"li"},"<text>"),", ",Object(s.b)("inlineCode",{parentName:"li"},"<sender>"),", array of ",Object(s.b)("inlineCode",{parentName:"li"},"<qr>"),", ",Object(s.b)("inlineCode",{parentName:"li"},"<cards>"),", ",Object(s.b)("inlineCode",{parentName:"li"},"<image>")," ")),Object(s.b)("h2",{id:"configuration"},"Configuration"),Object(s.b)("p",null,"The configuration of the node is as defined below:"),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Name"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Title"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The title of the node")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Send Now (Do not batch)"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null})),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Normally when a Convai request happens, all responses are collected and sent out at the end. When Send Now is enabled, the response will not wait until the request is finished. It will be sent immediately. Responses marked with Send Now will not be included when other batched messages are sent out at the end of a request.")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Channel"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Responses can be configured differently for different channels")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Message"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Message is a collection of messages. A single response can have more than 1 message. Click on ",Object(s.b)("img",{alt:"Input Node explained",src:Object(i.a)("img/nodes/stock/response/6.png")})," to add more messages")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Message Editor"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The message editor is a ",Object(s.b)("a",Object(a.a)({parentName:"td"},{href:"https://golang.org/pkg/text/template/"}),"templating")," enabled field where you can compose your response")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Typing Time"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Required"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Typing time defines the time to wait before sending the message to the user. During this time, the bot will show the typing indicator.")))))}p.isMDXComponent=!0},203:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b=r.a.createContext({}),l=function(e){var t=r.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},p=function(e){var t=l(e.components);return r.a.createElement(b.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,i=e.parentName,b=c(e,["components","mdxType","originalType","parentName"]),p=l(n),u=a,m=p["".concat(i,".").concat(u)]||p[u]||d[u]||s;return n?r.a.createElement(m,o({ref:t},b,{components:n})):r.a.createElement(m,o({ref:t},b))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,i=new Array(s);i[0]=u;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var b=2;b<s;b++)i[b]=n[b];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},204:function(e,t,n){"use strict";var a=n(0),r=n(48);t.a=function(){return Object(a.useContext)(r.a)}},205:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(208);var a=n(204);function r(e){var t=(Object(a.a)().siteConfig||{}).baseUrl,n=void 0===t?"/":t;if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?n+e.slice(1):n+e}},206:function(e,t,n){var a=n(66),r=n(23);e.exports=function(e,t,n){if(a(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},207:function(e,t,n){var a=n(2)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,!"/./"[e](t)}catch(r){}}return!0}},208:function(e,t,n){"use strict";var a=n(17),r=n(34),s=n(206),i="".startsWith;a(a.P+a.F*n(207)("startsWith"),"String",{startsWith:function(e){var t=s(this,e,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return i?i.call(t,a,n):t.slice(n,n+a.length)===a}})}}]);